# 简约划词翻译 (Simple Selection Translator)

一个轻量级、现代化的浏览器划词翻译扩展，支持多种翻译引擎，特别优化了对 OpenAI 及兼容大模型（如 DeepSeek, Moonshot）的流式输出支持，并具备“思考过程”显示功能。

## ✨ 主要功能

-   **划词即译**：在网页上选中文字，右下角浮现翻译按钮，点击即刻翻译。
-   **多引擎支持**：
    -   **OpenAI / 大模型 (推荐)**：支持流式输出 (Streaming)，打字机效果，响应迅速。
    -   **思考模型支持**：支持显示大模型（如 Jan-v1, DeepSeek-R1 等）的思维链 (Chain of Thought) 过程，可折叠查看。
    -   **传统引擎**：集成 Google、Bing、百度翻译 API。
-   **智能识别**：自动检测源语言，中英互译（中文->英文，其他->中文）。
-   **美观 UI**：现代化的卡片式设计，自适应高度，支持夜间模式（跟随系统或网页风格适配）。
-   **高度可配置**：自定义 API 地址、模型名称、字体、快捷键行为等。

## 🚀 安装指南

本扩展目前为开发者预览版，需通过“加载已解压的扩展”方式安装：

1.  **下载代码**：将本项目下载并解压到本地文件夹（确保包含 `manifest.json`）。
2.  **打开扩展管理**：
    -   **Edge**: 在地址栏输入 `edge://extensions/`
    -   **Chrome**: 在地址栏输入 `chrome://extensions/`
3.  **开启开发者模式**：在页面左下角（Edge）或右上角（Chrome）开启“开发人员模式”。
4.  **加载扩展**：点击“加载解压缩的扩展” (Load unpacked)，选择本项目所在的文件夹。
5.  **完成**：浏览器工具栏将出现插件图标，建议将其固定以便快速访问设置。

## ⚙️ 配置说明

点击浏览器右上角的插件图标，进入**设置页面**进行配置：

### 1. OpenAI / 大模型设置 (推荐)

-   **API 地址**: 填入 OpenAI 官方或兼容 API 的地址（例如 `https://api.openai.com/v1/chat/completions` 或您的代理地址）。
-   **API Key**: 填入您的 API 密钥 (`sk-...`)。
-   **翻译模型**: 用于常规翻译的模型，如 `gpt-4o-mini`, `hunyuan-mt`。
-   **思考模型**: (可选) 启用“显示思考”时使用的模型，如 `Jan-v1`。
-   **显示思考过程**: 开启后，如果模型返回思考内容（通过 `<<<THOUGHT>>>` 标记或 `reasoning_content` 字段），弹窗中将显示可折叠的思考区域。

### 2. 其他引擎

-   **百度翻译**: 需在 [百度翻译开放平台](https://api.fanyi.baidu.com/) 申请通用翻译 API，填入 AppID 和 Secret。
-   **Google / Bing**: 需填入对应的 API Key。

## 📖 使用方法

1.  **划词**：在任意网页上用鼠标选中一段文字。
2.  **点击按钮**：选中区域右下角会出现一个蓝色的“翻译”悬浮按钮，点击它。
3.  **查看结果**：翻译结果将以弹窗形式显示。
    -   如果是大模型翻译，结果会流式逐字显示。
    -   如果包含思考过程，点击“思考（展开）”即可查看模型的推理逻辑。
4.  **关闭**：点击弹窗右上角的 `×` 或点击页面空白处即可关闭弹窗。

## 🛠️ 常见问题

-   **Q: 为什么 OpenAI 翻译没反应？**
    -   A: 请检查 API Key 是否正确，以及 API 地址是否允许跨域 (CORS)。如果是自建代理，请确保 Header 中允许了 `Access-Control-Allow-Origin: *`。
-   **Q: 百度翻译报错？**
    -   A: 请检查 AppID 和 Secret 是否正确，以及是否开通了通用翻译 API 服务。
-   **Q: 思考内容没有显示？**
    -   A: 请确保在设置中开启了“显示思考过程”，并且使用的模型确实支持输出思考内容（或 Prompt 中包含了思考指令）。

## 📝 开发说明

-   `manifest.json`: MV3 配置文件。
-   `content_script.js`: 核心逻辑，处理 DOM 交互、API 请求流式解析。
-   `styles.css`: 样式文件，使用 CSS 变量管理主题。
-   `options.js`: 设置页逻辑，使用 `chrome.storage.sync` 保存配置。

---

_Created by GitHub Copilot_
